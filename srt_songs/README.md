# יוצר סרטוני כתוביות YouTube - מדריך שימוש מהיר

## תיאור קצר

כלי זה מאפשר יצירת סרטוני וידאו לשירים הכוללים אודיו MP3, רקע, כותרת (עם שם אמן אופציונלי) וכתוביות מסונכרנות באנגלית ובעברית (נוצרות אוטומטית באמצעות Google Gemini API).

## דרישות

1.  **Python:** גרסה 3.8 ומעלה.
2.  **Pip:** מנהל החבילות של פייתון.
3.  **ImageMagick:** **חובה להתקין!** זוהי תוכנה חיצונית ש-MoviePy דורשת. [הוראות התקנה](https://imagemagick.org/script/download.php).
4.  **מפתח API של Google Gemini:** נדרש ליצירת הכתוביות. ניתן להשיג דרך [Google AI Studio](https://aistudio.google.com/app/apikey).

## התקנה והגדרה

1.  **קבל את הקוד:** הורד או שכפל את קבצי הקוד לתיקייה במחשב שלך.
2.  **התקן ספריות Python:**
    פתח טרמינל/שורת פקודה בתיקיית הקוד והרץ (רצוי בתוך סביבה וירטואלית):
    ```bash
    pip install google-generativeai moviepy Pillow numpy arabic_reshaper python-bidi imageio imageio-ffmpeg PyYAML
    ```
3.  **התקן את ImageMagick:** אם לא עשית זאת קודם, התקן את ImageMagick לפי ההוראות באתר הרשמי. **זו דרישה חיונית!**
4.  **הגדר מפתח API של Gemini:**
    *   הגדר את המפתח שקיבלת כ**משתנה סביבה** בשם `GEMINI_API_KEY` **בטרמינל שממנו תריץ את הסקריפט**.
    *   **Linux/macOS:** `export GEMINI_API_KEY="המפתח_שלך"`
    *   **Windows (cmd):** `set GEMINI_API_KEY=המפתח_שלך`
    *   **Windows (PowerShell):** `$env:GEMINI_API_KEY="המפתח_שלך"`
5.  **הכן קבצי קלט:**
    *   **`song_list.json`:**
        *   עדכן קובץ זה עם רשימת השירים שלך. כל שיר צריך:
            *   `"name"`: שם השיר (חייב להיות **זהה** לשם קובץ ה-MP3!).
            *   `"artist"`: שם האמן (אופציונלי).
            *   `"youtube_url"`: קישור YouTube תקין לשיר.
        *   **דוגמה:** `[{"name": "My Song Title", "artist": "My Artist", "youtube_url": "https://..."}]`
    *   **קבצי MP3:**
        *   השג קובץ MP3 עבור כל שיר ברשימה.
        *   מקם את קבצי ה-MP3 בתיקייה `demo_songs` (או לפי ההגדרה ב-`video_config.json`).
        *   **חשוב:** שם כל קובץ MP3 חייב להיות **זהה** לשדה `"name"` שלו ב-`song_list.json`, בתוספת `.mp3`. (לדוגמה: `My Song Title.mp3`).
    *   **נכסים (Assets):**
        *   מקם את הפונטים (קבצי `.ttf`) שבהם תשתמש בתיקייה `assets/fonts`.
        *   מקם את תמונות הרקע בתיקייה `assets/backgrounds/songs`.
    *   **הוראות מערכת (`system_instructions.yaml`):** קובץ זה מכיל את ההנחיות הנשלחות ל-API של Gemini. ניתן לערוך אותו בזהירות כדי לשנות את אופן יצירת הכתוביות.
6.  **בדוק תצורה (`video_config.json`):**
    *   פתח את הקובץ `video_config.json`.
    *   ודא שהנתיבים תחת `"paths"` נכונים ומצביעים לתיקיות הקלט/פלט שלך (במיוחד `assets_rel`, `demo_songs_rel`, `output_rel`).
    *   ודא ששמות קבצי הפונטים תחת `"title_style"`, `"artist_style"`, ו-`"subtitle_style"` תואמים לשמות הקבצים שהעתקת לתיקיית `assets/fonts`.

## הרצת הסקריפט

1.  פתח טרמינל/שורת פקודה בתיקיית הקוד.
2.  ודא שמשתנה הסביבה `GEMINI_API_KEY` הוגדר בטרמינל זה.
3.  הרץ את הסקריפט הראשי:
    ```bash
    python main.py
    ```
4.  הסקריפט יציג את רשימת השירים מ-`song_list.json`.
5.  הזן את מספר השיר הרצוי ולחץ Enter.
6.  התהליך יתחיל: בדיקת קבצים, יצירת או טעינת כתוביות, ולבסוף הרכבת הוידאו. התהליך עשוי לקחת מספר דקות.

## פלט

*   **הסרטון הסופי:** קובץ ה-MP4 המוכן יישמר בתיקיית `output` (או לפי ההגדרה), בשם `<שם_השיר>_subtitled.mp4`.
*   **פריימים של כתוביות:** תמונות PNG של הופעת כל כתובית יישמרו בתיקיית `output/subtitle_frames`.
*   **קבצי SRT:** קבצי הכתוביות שנוצרו או נטענו (אנגלית ועברית) יישמרו בפורמט **SRT** בתיקייה שהוגדרה ב-`video_config.json` תחת המפתח `srt_files_rel`, לשימוש חוזר או לעריכה ידנית.

## פתרון בעיות נפוצות

*   **`FileNotFoundError`:** בדוק שכל הנתיבים ב-`video_config.json` נכונים, שקבצי הפונטים/רקע/MP3 קיימים במיקומים הנכונים וששמות קבצי ה-MP3 תואמים לשמות ב-`song_list.json`. ודא גם שקובץ `system_instructions.yaml` קיים באותה תיקייה כמו `subtitle_generator.py`.
*   **שגיאת API Key:** ודא שהגדרת את משתנה הסביבה `GEMINI_API_KEY` *לפני* הרצת הסקריפט ובאותו חלון טרמינל. בדוק שהמפתח עצמו תקין.
*   **שגיאות טקסט/ImageMagick:** ודא ש-ImageMagick מותקן כראוי וזמין למערכת (לפעמים נדרשת הפעלה מחדש של המחשב או הטרמינל לאחר ההתקנה).
*   **שגיאות בטעינת SRT:** אם קיימים קבצי SRT שאתה רוצה לטעון, ודא שהם בפורמט SRT תקין.

## רישיון

כל התוכן בתיקייה זו ובכל תתי התיקיות שלה, כולל קוד המקור, תצורות, סקריפטים ומסמכים, מורשה תחת רישיון [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0).